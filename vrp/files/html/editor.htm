<html>
<head>
    <link rel="stylesheet" href="http://mta/local/files/html/js/editor/codemirror.css">
    <link rel="stylesheet" href="http://mta/local/files/html/js/editor/material.css">
    <link rel="stylesheet" href="http://mta/local/files/html/js/editor/base16-light.css">
    <script src="http://mta/local/files/html/js/editor/codemirror.js"></script>
    <script src="http://mta/local/files/html/js/editor/lua.js"></script>
    <script src="http://mta/local/files/html/js/mtaevents.min.js"></script>
    <style>
        html, body, form, textarea {
           margin:0;
            padding:0;
        }
        form, textarea, .codemirror {
            width:100%;
            height:100%;
        }
        .code {
            width:100%;
            height:100vh;
            position:relative;
        }
    </style>
</head>						
<body>
    <form>
        <textarea id="code" name="code"></textarea>
    </form>

    <script>
        var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
            lineNumbers: true,
            styleActiveLine: true,
            matchBrackets: true,
            theme: "material",
            mode: "lua",
            indentWithTabs: true,
            tabSize: 4,
            indentUnit: 4,
        });


        mtatools.registerEvent("onCodeEditorRequest", function() {
            console.log("requesting code...")
            mta.triggerEvent("onCodeEditorSend", editor.getValue());
        });
        mtatools.registerEvent("onCodeEditorThemeChange", function(theme) {
            editor.setOption("theme", theme);
        });
        mtatools.registerEvent("onCodeEditorTemplateInsert", function(template) {
        
        });

    </script>
</body>

</html>
